const path = require('path');

const baseCSSLoaders = require('./baseCSSLoaders');
const storybookDependentLoaders = require('./storybookDependentLoaders');

module.exports = {
  test: /\.module\.scss$/,
  use: [
    ...storybookDependentLoaders(),
    {
      loader: path.resolve(__dirname, '..', '..', 'webpack', 'loaders', 'type-declarations-for-css-modules.js'),
      options: {
        banner: '// This file is automatically generated by typings-for-css-modules.\n// Please do not change this file!'
      }
    },
    {
      loader: 'css-loader',
      options: {
        modules: {
          localIdentName: '[local]__[hash:base64:5]',
          mode: 'local',
        },
        importLoaders: 2,
        localsConvention: 'camelCaseOnly',
      }
    },
    ...baseCSSLoaders
  ]
};
